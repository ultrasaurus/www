<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ffmpeg on osx lion</title>
    <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
    <style>
        #content {
            margin-top: 2rem;
            margin-left: .5rem;
        }
    </style>
</head>

<body>

    <!-- Start Top Bar -->
    <div class="top-bar">
        <div class="top-bar-left">
            <ul class="menu">
                <li><a href="/">The evolving ultrasaurus</a></li>
            </ul>
        </div>
        <div class="top-bar-right">
            <ul class="menu">
                <li><a href="/archives">Archives</a></li>
                <li><a href="/about">About</a></li>
                <li><a href="/speaking">Speaking</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </div>
    </div>
    <!-- End Top Bar -->

    <div class="row" id="content">
        <div class="medium-8 columns">
            
<h1>ffmpeg on osx lion</h1>

<p><em>January 08, 2012</em></p>


<p>Update: <a href="https://www.ultrasaurus.com/sarahblog/2013/06/ffmpeg-for-ogg-and-webm/">more links and ogg and webm details</a></p>
<p>I found that I needed to convert an m4a audio file (which is what QuickTime saves when I record audio) to a wav file, so I decided to use my favorite “can opener.” The versatile open source <a href="http://ffmpeg.org">ffmpeg</a> tool has always seemed to be able to convert anything to anything in audio-video formats.</p>
<p>I decided to pull the source from git:<br>
<code>&lt;br&gt;&lt;/br&gt;$ git clone git://source.ffmpeg.org/ffmpeg.git&lt;br&gt;&lt;/br&gt;$ cd ffmpeg/&lt;br&gt;&lt;/br&gt;</code></p>
<p>Stable versions are tagged (which I could see with “git tag -l”). I don’t need to live on the edge right now, so I switched to the tag “n0.9.1” which I assume is for the latest stable build “harmony” 0.9.1 and made a local branch based on that.<br>
<code>&lt;br&gt;&lt;/br&gt;$ git co n0.9.1&lt;br&gt;&lt;/br&gt;$ git checkout -b n0.9.1&lt;br&gt;&lt;/br&gt;</code></p>
<p>Instructions for building ffmpeg are in the “INSTALL” file. I discovered I needed yasm, which I could install with brew. Here’s what I did:<br>
<code>&lt;br&gt;&lt;/br&gt;$  brew install yasm&lt;br&gt;&lt;/br&gt;$  ./configure&lt;br&gt;&lt;/br&gt;$ make&lt;br&gt;&lt;/br&gt;CC	libavdevice/alldevices.o&lt;br&gt;&lt;/br&gt;CC	libavdevice/avdevice.o&lt;br&gt;&lt;/br&gt;CC	libavdevice/lavfi.o&lt;br&gt;&lt;/br&gt;AR	libavdevice/libavdevice.a&lt;br&gt;&lt;/br&gt;CC	libavfilter/af_aconvert.o&lt;br&gt;&lt;/br&gt;libavfilter/af_aconvert.c:53: warning: function declaration isn’t a prototype&lt;br&gt;&lt;/br&gt;libavfilter/af_aconvert.c:105: warning: function declaration isn’t a prototype&lt;br&gt;&lt;/br&gt;CC	libavfilter/af_aformat.o&lt;br&gt;&lt;/br&gt;CC	libavfilter/af_anull.o&lt;br&gt;&lt;/br&gt;CC	libavfilter/af_aresample.o&lt;br&gt;&lt;/br&gt;    :&lt;br&gt;&lt;/br&gt;   :&lt;br&gt;&lt;/br&gt;ffserver.c: In function ‘parse_ffconfig’:&lt;br&gt;&lt;/br&gt;ffserver.c:4236: warning: ‘avcodec_get_context_defaults2’ is deprecated (declared at ./libavcodec/avcodec.h:3948)&lt;br&gt;&lt;/br&gt;ffserver.c:4237: warning: ‘avcodec_get_context_defaults2’ is deprecated (declared at ./libavcodec/avcodec.h:3948)&lt;br&gt;&lt;/br&gt;LD	ffserver_g&lt;br&gt;&lt;/br&gt;CP	ffserver&lt;br&gt;&lt;/br&gt;STRIP	ffserver&lt;br&gt;&lt;/br&gt;</code><br>
I saw a lot of warnings, but they didn’t seem to negatively affect what I was trying to do. I found a <a href="http://www.catswhocode.com/blog/19-ffmpeg-commands-for-all-needs">nice blog post from catswhocode</a> to remind me of the usage, and was able to use this simple command:</p>
<p><code>&lt;br&gt;&lt;/br&gt;$ ./ffmpeg -i frog.m4a frog.wav&lt;br&gt;&lt;/br&gt;ffmpeg version 0.9.1, Copyright (c) 2000-2012 the FFmpeg developers&lt;br&gt;&lt;/br&gt;  built on Jan  7 2012 21:19:08 with llvm_gcc 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)&lt;br&gt;&lt;/br&gt;  configuration:&lt;br&gt;&lt;/br&gt;  libavutil    51. 32. 0 / 51. 32. 0&lt;br&gt;&lt;/br&gt;  libavcodec   53. 42. 4 / 53. 42. 4&lt;br&gt;&lt;/br&gt;  libavformat  53. 24. 2 / 53. 24. 2&lt;br&gt;&lt;/br&gt;  libavdevice  53.  4. 0 / 53.  4. 0&lt;br&gt;&lt;/br&gt;  libavfilter   2. 53. 0 /  2. 53. 0&lt;br&gt;&lt;/br&gt;  libswscale    2.  1. 0 /  2.  1. 0&lt;br&gt;&lt;/br&gt;Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'frog.m4a':&lt;br&gt;&lt;/br&gt;  Metadata:&lt;br&gt;&lt;/br&gt;    major_brand     : M4A&lt;br&gt;&lt;/br&gt;    minor_version   : 0&lt;br&gt;&lt;/br&gt;    compatible_brands: M4V M4A mp42isom&lt;br&gt;&lt;/br&gt;    creation_time   : 2012-01-08 05:09:05&lt;br&gt;&lt;/br&gt;  Duration: 00:00:07.22, start: 0.000000, bitrate: 206 kb/s&lt;br&gt;&lt;/br&gt;    Stream #0:0(und): Audio: aac (mp4a / 0x6134706D), 44100 Hz, stereo, s16, 201 kb/s&lt;br&gt;&lt;/br&gt;    Metadata:&lt;br&gt;&lt;/br&gt;      creation_time   : 2012-01-08 05:09:05&lt;br&gt;&lt;/br&gt;      handler_name    :&lt;br&gt;&lt;/br&gt;Output #0, wav, to 'frog.wav':&lt;br&gt;&lt;/br&gt;  Metadata:&lt;br&gt;&lt;/br&gt;    major_brand     : M4A&lt;br&gt;&lt;/br&gt;    minor_version   : 0&lt;br&gt;&lt;/br&gt;    compatible_brands: M4V M4A mp42isom&lt;br&gt;&lt;/br&gt;    creation_time   : 2012-01-08 05:09:05&lt;br&gt;&lt;/br&gt;    encoder         : Lavf53.24.2&lt;br&gt;&lt;/br&gt;    Stream #0:0(und): Audio: pcm_s16le ([1][0][0][0] / 0x0001), 44100 Hz, stereo, s16, 1411 kb/s&lt;br&gt;&lt;/br&gt;    Metadata:&lt;br&gt;&lt;/br&gt;      creation_time   : 2012-01-08 05:09:05&lt;br&gt;&lt;/br&gt;      handler_name    :&lt;br&gt;&lt;/br&gt;Stream mapping:&lt;br&gt;&lt;/br&gt;  Stream #0:0 -&gt; #0:0 (aac -&gt; pcm_s16le)&lt;br&gt;&lt;/br&gt;Press [q] to stop, [?] for help&lt;br&gt;&lt;/br&gt;size=    1244kB time=00:00:07.22 bitrate=1411.3kbits/s&lt;br&gt;&lt;/br&gt;video:0kB audio:1244kB global headers:0kB muxing overhead 0.003611%</code></p>
<p>$ ls<br>
frog.m4a frog.wav</p>
<p>Success!!</p>




<style>
    .previous {
        display: inline-block;
        margin-left: .5em;
        margin-bottom: .5em
    }

    .next {
        float: right;
        margin-right: .5em;
        margin-bottom: .5em
    }
</style>



<hr>
<nav id="nav-single" class="pager">
    <span class="previous"><a href="/2012/01/cucumber-and-custom-rspec-matchers-with-rails-3-1/">← cucumber and custom rspec matchers with rails 3.1</span></a>
    
    <span class="next"><a href="/2012/01/become-a-working-developer-in-5-months/" rel="next">become a working developer in 5 months? →</span></a></span>
    
</nav>

        </div>
        <div class="medium-3 columns" data-sticky-container>
            <div class="sticky" data-sticky data-anchor="content">
                <h4>Categories</h4>
                <ul>
                    <li><a href="#">Skyler</a></li>
                    <li><a href="#">Jesse</a></li>
                    <li><a href="#">Mike</a></li>
                    <li><a href="#">Holly</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
    <script>
        $(document).foundation();
    </script>
</body>

</html>