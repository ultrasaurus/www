<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>legacy testing with capybara/mechanize</title>
    </head>
    <body>
        
<h1>legacy testing with capybara/mechanize</h1>

<p>I spent a little time working on some tests for a legacy web app that we plan to re-write in Ruby. Before the big re-write, I thought it would be wise to write some integration tests to call the app via http and verify responses. I wanted to use vanilla http and not have the overhead of launching a browser and was frustrated that Capybara didn’t have a driver to suit my needs.</p>
<p>I started down the path of writing tests from scratch using Net::HTTP, but figured that there had to be someone else who had run into this before. <a href="http://twitter.com/kakutani">@kakutani</a> told me about <a href="https://github.com/jeroenvandijk/capybara-mechanize">capybara-mechanize</a> which seems to be exactly what I need.</p>
<p>Here’s my first really basic experiment using RSpec to test a well-known web site:</p>
<pre><code>
require 'capybara/rspec'
require 'capybara/mechanize'
Capybara.default_driver = :mechanize

describe 'web app' do
  include Capybara

  before do
    Capybara.app_host = &quot;http://www.google.com&quot;
  end

  it &quot;has a copyright&quot; do
    visit '/'
    page.should have_content('© 2011')
  end

end
</code></pre>

<hr>
<ul><li>Next: <a href="/2011/04/on-choosing-rspec-as-a-test-framework/">on choosing RSpec as a test framework</a></li><li>Previous: <a href="/2011/01/kicking-off-remote-learning-for-ruby-on-rails/">kicking off remote learning for ruby on rails</a></li>
</ul>

    </body>
</html>