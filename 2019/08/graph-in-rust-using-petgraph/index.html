<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>graph in rust using petgraph</title>
    <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
  </head>
  <body>

    <!-- Start Top Bar -->
    <div class="top-bar">
      <div class="top-bar-left">
        <ul class="menu">
          <li><a href="/">The evolving ultrasaurus</a></li>
        </ul>
      </div>
      <div class="top-bar-right">
        <ul class="menu">
          <li><a href="/archives">Archives</a></li>
          <li><a href="/about">About</a></li>
          <li><a href="/speaking">Speaking</a></li>
          <li><a href="/contact">Contact</a></li>
        </ul>
      </div>
    </div>
    <!-- End Top Bar -->

    <div class="row" id="content">
      <div class="medium-8 columns">
        


<h1>graph in rust using petgraph</h1>

<p><em>2019-08-17</em></p> 


<p>Getting started with Rust and the <a href="https://docs.rs/petgraph/0.4.13/petgraph/">petgraph crate</a>, I made a little program to write a graph in “dot” file format. Below is the rust and some command-line code to turn it into a png.</p>
<p><img src="../../../uploads/2019/08/example.dot_.png" alt="visual graph representation with circles and arrows"></p>
<pre><code>use petgraph::Graph;
use petgraph::dot::{Dot, Config};
use std::fs::File;
use std::io::Write;

fn main() {
    println!(&quot;hello graph!&quot;);
    let mut graph = Graph::&lt;_, i32&gt;::new();
    graph.add_node(&quot;A&quot;);
    graph.add_node(&quot;B&quot;);
    graph.add_node(&quot;C&quot;);
    graph.add_node(&quot;D&quot;);
    graph.extend_with_edges(&amp;[
        (0, 1), (0, 2), (0, 3),
        (1, 2), (1, 3),
        (2, 3),
    ]);

    println!(&quot;{:?}&quot;, Dot::with_config(&amp;graph, &amp;[Config::EdgeNoLabel]));
    let mut f = File::create(&quot;example.dot&quot;).unwrap();
    let output = format!(&quot;{}&quot;, Dot::with_config(&amp;graph, &amp;[Config::EdgeNoLabel]));
    f.write_all(&amp;output.as_bytes()).expect(&quot;could not write file&quot;);
}

</code></pre>
<p>output of <code>cargo run</code>:</p>
<pre><code>hello graph!
digraph {
    0 [label=&quot;\&quot;A\&quot;&quot;]
    1 [label=&quot;\&quot;B\&quot;&quot;]
    2 [label=&quot;\&quot;C\&quot;&quot;]
    3 [label=&quot;\&quot;D\&quot;&quot;]
    0 -&gt; 1
    0 -&gt; 2
    0 -&gt; 3
    1 -&gt; 2
    1 -&gt; 3
    2 -&gt; 3
}

</code></pre>
<h2>Generate PNG from DOT file</h2>
<p>The <code>dot</code> command is part of <a href="https://www.graphviz.org/">graphviz</a>, which I installed with <code>brew install graphviz</code>.</p>
<p>The following command creates a PNG file from the .dot file generated by Rust code above</p>
<pre><code>dot -T png -O example.dot

</code></pre>
<p>The resulting PNG is displayed at the top-right of this post (next to the Rust code).</p>
<hr>
<p>Special thanks to:<br>
* <a href="https://stackoverflow.com/questions/57540335/writing-petgraph-dot-to-a-file">mcarton’s help on stackoverflow</a> for enlightening me on a bit of Rust nuance as I experimented with petgraph.<br>
* <a href="https://rudifa.wordpress.com/2010/01/10/how-to-run-graphviz-on-the-mac/">rudifa’s post graphviz-on-the-mac</a></p>


<style>
.previous{display:inline-block;margin-left:.5em;margin-bottom:.5em}
.next{float:right;display:inline-block;margin-right:.5em;margin-bottom:.5em}
.assistive-text
</style>



<hr>
<nav id="nav-single" class="pager">
            <span class="previous"><a href="/2019/10/rust-whats-a-tuple-variant/">← [rust] what&#8217;s a tuple variant?</span></a>
            
			<span class="next"><a href="/2019/06/debugging-openssl-shared-libary/" rel="next">debugging openssl shared libary→</span></a></span>
            

</nav>



      </div>
      <div class="medium-3 columns" data-sticky-container>
        <div class="sticky" data-sticky data-anchor="content">
          <h4>Categories</h4>
          <ul>
            <li><a href="#">Skyler</a></li>
            <li><a href="#">Jesse</a></li>
            <li><a href="#">Mike</a></li>
            <li><a href="#">Holly</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
    <script>
      $(document).foundation();
    </script>
  </body>
</html>



